-- Tabelas de Domínio

CREATE TABLE "CSTB010_CATEGORIA_ACESSO" (
  "ID_CATEGORIA_ACESSO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_CATEGORIA_ACESSO" "VARCHAR(20)" NOT NULL
);

CREATE TABLE "CSTB011_CATEGORIA_CARGO" (
  "ID_CATEGORIA_CARGO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_CATEGORIA_CARGO" "VARCHAR(20)" NOT NULL
);

CREATE TABLE "CSTB012_CATEGORIA_ENCOMENDA" (
  "ID_CATEGORIA_ENCOMENDA" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_CATEGORIA_ENCOMENDA" "VARCHAR(20)" NOT NULL
);

CREATE TABLE "CSTB013_CATEGORIA_RECLAMACAO" (
  "ID_CATEGORIA_RECLAMACAO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_CATEGORIA_RECLAMACAO" "VARCHAR(20)" NOT NULL DEFAULT 'ABERTA'
);

CREATE TABLE "CSTB014_CATEGORIA_RESERVA" (
  "ID_CATEGORIA_RESERVA" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_CATEGORIA_RESERVA" "VARCHAR(20)" NOT NULL DEFAULT 'CONFIRMADA'
);

-- Tabelas Núcleo

CREATE TABLE "CSTB001_USER" (
  "ID_USER" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NR_CPF" "VARCHAR(11)" UNIQUE NOT NULL,
  "NO_PESSOA" "VARCHAR(150)" NOT NULL,
  "NR_RG" "VARCHAR(20)" UNIQUE,
  "EM_PESSOAL" "VARCHAR(150)" UNIQUE NOT NULL,
  "NR_CELULAR" "VARCHAR(15)",
  "ID_CATEGORIA_ACESSO" BIGINT NOT NULL,
  "TX_SENHA" "VARCHAR(255)" NOT NULL,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true,
  CHECK (LENGTH(NR_CPF) = 11),
  CHECK (EM_PESSOAL LIKE '%@%')
);

CREATE TABLE "CSTB002_MORADOR" (
  "ID_MORADOR" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_USER" BIGINT UNIQUE NOT NULL,
  "IC_BLOCO" "VARCHAR(10)" NOT NULL,
  "NR_APARTAMENTO" INTEGER NOT NULL,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true,
  CHECK (NR_APARTAMENTO > 0)
);

CREATE TABLE "CSTB003_FUNCIONARIO" (
  "ID_FUNCIONARIO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_USER" BIGINT UNIQUE NOT NULL,
  "ID_CATEGORIA_CARGO" BIGINT NOT NULL,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

-- Tabelas Operação

CREATE TABLE "CSTB004_VISITANTE" (
  "ID_VISITANTE" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_PESSOA" "VARCHAR(150)" NOT NULL,
  "NR_CPF" "VARCHAR(11)" UNIQUE,
  "NR_RG" "VARCHAR(20)" UNIQUE NOT NULL,
  "NR_TELEFONE" "VARCHAR(15)",
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

CREATE TABLE "CSTB015_ACESSO_VISITANTE" (
  "ID_ACESSO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_VISITANTE" BIGINT NOT NULL,
  "ID_MORADOR" BIGINT NOT NULL,
  "ID_FUNCIONARIO" BIGINT NOT NULL,
  "DT_ENTRADA" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "DT_SAIDA" TIMESTAMP
);

CREATE TABLE "CSTB005_ENCOMENDA" (
  "ID_ENCOMENDA" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_MORADOR" BIGINT NOT NULL,
  "ID_FUNCIONARIO" BIGINT NOT NULL,
  "NO_REMETENTE" "VARCHAR(150)" NOT NULL,
  "ID_CATEGORIA_ENCOMENDA" BIGINT NOT NULL,
  "DT_RECEBIDO" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "DT_RETIRADO" TIMESTAMP,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

CREATE TABLE "CSTB006_RECLAMACAO" (
  "ID_RECLAMACAO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_MORADOR" BIGINT NOT NULL,
  "TX_TITULO" "VARCHAR(100)" NOT NULL,
  "DS_RECLAMACAO" TEXT NOT NULL,
  "ID_CATEGORIA_RECLAMACAO" BIGINT NOT NULL,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

CREATE TABLE "CSTB007_AVISO" (
  "ID_AVISO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_USER" BIGINT NOT NULL,
  "TX_TITULO" "VARCHAR(100)" NOT NULL,
  "DS_AVISO" TEXT NOT NULL,
  "DT_EXPIRACAO" TIMESTAMP,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

CREATE TABLE "CSTB008_LOCAL" (
  "ID_LOCAL" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NO_LOCAL" "VARCHAR(100)" UNIQUE NOT NULL,
  "NR_CAPACIDADE" INTEGER NOT NULL,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

CREATE TABLE "CSTB009_RESERVA" (
  "ID_RESERVA" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_MORADOR" BIGINT NOT NULL,
  "ID_LOCAL" BIGINT NOT NULL,
  "DT_INICIO" TIMESTAMP NOT NULL,
  "DT_FIM" TIMESTAMP NOT NULL,
  "ID_CATEGORIA_RESERVA" BIGINT NOT NULL,
  "LG_ATIVO" BOOLEAN NOT NULL DEFAULT true
);

-- Tabelas Histórico

CREATE TABLE "CSTBH001_USER" (
  "ID_HISTORICO" BIGINT GENERATED BY DEFAULT AS IDENTITY,
  "ID_USER" BIGINT GENERATED BY DEFAULT AS IDENTITY,
  "NR_CPF" "VARCHAR(11)" UNIQUE NOT NULL,
  "NO_PESSOA" "VARCHAR(150)" NOT NULL,
  "NR_RG" "VARCHAR(20)" UNIQUE,
  "EM_PESSOAL" "VARCHAR(150)" UNIQUE NOT NULL,
  "NR_CELULAR" "NUMERIC(11,0)",
  "ID_CATEGORIA_ACESSO" "VARCHAR(20)" NOT NULL,
  "TX_SENHA" "VARCHAR(255)" NOT NULL,
  "IC_ATIVO" "CHAR (1)" NOT NULL DEFAULT 'S',
  "DH_ACAO_REGISTRO" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "IC_ACAO_REGISTRO" "CHAR (1)" NOT NULL,
  "ID_USER_USUARIO_ACAO_REGISTRO" BIGINT NOT NULL,
  PRIMARY KEY ("ID_HISTORICO", "ID_USER")
);

CREATE TABLE "CSTBH002_MORADOR" (
  "ID_HISTORICO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_MORADOR" BIGINT,
  "ID_USER" BIGINT,
  "IC_BLOCO" "VARCHAR(10)",
  "NR_APARTAMENTO" INTEGER,
  "LG_ATIVO" BOOLEAN,
  "DH_ACAO_REGISTRO" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "IC_ACAO_REGISTRO" "CHAR(1)" NOT NULL,
  "ID_USER_AUDITOR" BIGINT NOT NULL
);

CREATE TABLE "CSTBH003_FUNCIONARIO" (
  "ID_HISTORICO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_FUNCIONARIO" BIGINT,
  "ID_USER" BIGINT,
  "ID_CATEGORIA_CARGO" BIGINT,
  "LG_ATIVO" BOOLEAN,
  "DH_ACAO_REGISTRO" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "IC_ACAO_REGISTRO" "CHAR(1)" NOT NULL,
  "ID_USER_AUDITOR" BIGINT NOT NULL
);

CREATE TABLE "CSTBH005_ENCOMENDA" (
  "ID_HISTORICO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_ENCOMENDA" BIGINT,
  "ID_MORADOR" BIGINT,
  "ID_FUNCIONARIO" BIGINT,
  "ID_CATEGORIA_ENCOMENDA" BIGINT,
  "DT_RETIRADO" TIMESTAMP,
  "LG_ATIVO" BOOLEAN,
  "DH_ACAO_REGISTRO" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "IC_ACAO_REGISTRO" "CHAR(1)" NOT NULL,
  "ID_USER_AUDITOR" BIGINT NOT NULL
);

CREATE TABLE "CSTBH009_RESERVA" (
  "ID_HISTORICO" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "ID_RESERVA" BIGINT,
  "ID_MORADOR" BIGINT,
  "ID_LOCAL" BIGINT,
  "DT_INICIO" TIMESTAMP,
  "DT_FIM" TIMESTAMP,
  "ID_CATEGORIA_RESERVA" BIGINT,
  "LG_ATIVO" BOOLEAN,
  "DH_ACAO_REGISTRO" TIMESTAMP NOT NULL DEFAULT (CURRENT_TIMESTAMP),
  "IC_ACAO_REGISTRO" "CHAR(1)" NOT NULL,
  "ID_USER_AUDITOR" BIGINT NOT NULL
);

COMMENT ON TABLE "CSTB010_CATEGORIA_ACESSO" IS 'Tabela de domínio que define os perfis de segurança do sistema.';

COMMENT ON COLUMN "CSTB010_CATEGORIA_ACESSO"."ID_CATEGORIA_ACESSO" IS 'Chave primária: Identificador único da categoria de permissão.';

COMMENT ON COLUMN "CSTB010_CATEGORIA_ACESSO"."NO_CATEGORIA_ACESSO" IS 'Nome do nível de acesso (Ex: ADMIN, SINDICO, MORADOR).';

COMMENT ON TABLE "CSTB011_CATEGORIA_CARGO" IS 'Domínio de cargos para classificação de funcionários.';

COMMENT ON COLUMN "CSTB011_CATEGORIA_CARGO"."ID_CATEGORIA_CARGO" IS 'Chave primária: Identificador único do cargo do funcionário.';

COMMENT ON COLUMN "CSTB011_CATEGORIA_CARGO"."NO_CATEGORIA_CARGO" IS 'Descrição do cargo (Ex: PORTEIRO, ZELADOR, SEGURANÇA).';

COMMENT ON TABLE "CSTB012_CATEGORIA_ENCOMENDA" IS 'Domínio para controle do ciclo de vida das encomendas.';

COMMENT ON COLUMN "CSTB012_CATEGORIA_ENCOMENDA"."ID_CATEGORIA_ENCOMENDA" IS 'Chave primária: Identificador único do status da entrega.';

COMMENT ON COLUMN "CSTB012_CATEGORIA_ENCOMENDA"."NO_CATEGORIA_ENCOMENDA" IS 'Status da encomenda (Ex: PENDENTE, ENTREGUE, DEVOLVIDA).';

COMMENT ON TABLE "CSTB013_CATEGORIA_RECLAMACAO" IS 'Domínio para gestão do fluxo de atendimento a moradores.';

COMMENT ON COLUMN "CSTB013_CATEGORIA_RECLAMACAO"."ID_CATEGORIA_RECLAMACAO" IS 'Chave primária: Identificador único do status da ocorrência.';

COMMENT ON COLUMN "CSTB013_CATEGORIA_RECLAMACAO"."NO_CATEGORIA_RECLAMACAO" IS 'Situação atual da queixa (Ex: ABERTA, EM ANALISE, CONCLUIDA).';

COMMENT ON TABLE "CSTB014_CATEGORIA_RESERVA" IS 'Domínio para controle de ocupação das áreas comuns.';

COMMENT ON COLUMN "CSTB014_CATEGORIA_RESERVA"."ID_CATEGORIA_RESERVA" IS 'Chave primária: Identificador único do status do agendamento.';

COMMENT ON COLUMN "CSTB014_CATEGORIA_RESERVA"."NO_CATEGORIA_RESERVA" IS 'Situação da reserva (Ex: PENDENTE, CONFIRMADA, CANCELADA).';

COMMENT ON COLUMN "CSTB001_USER"."ID_USER" IS 'Chave primária: Identificador mestre e único de acesso ao sistema.';

COMMENT ON COLUMN "CSTB001_USER"."NR_CPF" IS 'CPF do usuário: Utilizado como login único (somente números).';

COMMENT ON COLUMN "CSTB001_USER"."NO_PESSOA" IS 'Nome completo do usuário para fins cadastrais e de identificação.';

COMMENT ON COLUMN "CSTB001_USER"."NR_RG" IS 'Número da identidade para conferência física de documentos.';

COMMENT ON COLUMN "CSTB001_USER"."EM_PESSOAL" IS 'E-mail principal: Usado para notificações e recuperação de conta.';

COMMENT ON COLUMN "CSTB001_USER"."NR_CELULAR" IS 'Telefone de contato no formato string para suportar máscaras e DDI.';

COMMENT ON COLUMN "CSTB001_USER"."ID_CATEGORIA_ACESSO" IS 'Chave Estrangeira: Define o perfil de permissões deste usuário.';

COMMENT ON COLUMN "CSTB001_USER"."TX_SENHA" IS 'Hash da senha: Armazena a credencial criptografada (jamais texto plano).';

COMMENT ON COLUMN "CSTB001_USER"."LG_ATIVO" IS 'Flag de status: Define se o usuário está ativo ou inativo (exclusão lógica).';

COMMENT ON COLUMN "CSTB002_MORADOR"."ID_MORADOR" IS 'Chave primária: Identificador único do morador no condomínio.';

COMMENT ON COLUMN "CSTB002_MORADOR"."ID_USER" IS 'Chave Estrangeira: Vincula este perfil de morador a uma conta de usuário.';

COMMENT ON COLUMN "CSTB002_MORADOR"."IC_BLOCO" IS 'Identificador do bloco ou torre da unidade habitacional.';

COMMENT ON COLUMN "CSTB002_MORADOR"."NR_APARTAMENTO" IS 'Número da unidade autônoma (apartamento ou casa).';

COMMENT ON COLUMN "CSTB002_MORADOR"."LG_ATIVO" IS 'Indica se o morador ainda reside no condomínio.';

COMMENT ON COLUMN "CSTB003_FUNCIONARIO"."ID_FUNCIONARIO" IS 'Chave primária: Identificador interno do colaborador.';

COMMENT ON COLUMN "CSTB003_FUNCIONARIO"."ID_USER" IS 'Chave Estrangeira: Vincula este funcionário a uma conta de acesso.';

COMMENT ON COLUMN "CSTB003_FUNCIONARIO"."ID_CATEGORIA_CARGO" IS 'Chave Estrangeira: Define a função exercida por este funcionário.';

COMMENT ON COLUMN "CSTB003_FUNCIONARIO"."LG_ATIVO" IS 'Indica se o colaborador possui contrato ativo com o condomínio.';

COMMENT ON TABLE "CSTB004_VISITANTE" IS 'Cadastro central de dados biográficos de visitantes.';

COMMENT ON COLUMN "CSTB004_VISITANTE"."ID_VISITANTE" IS 'Chave primária: Registro único da pessoa física externa ao condomínio.';

COMMENT ON COLUMN "CSTB004_VISITANTE"."NO_PESSOA" IS 'Nome completo do visitante para controle de acesso.';

COMMENT ON COLUMN "CSTB004_VISITANTE"."NR_CPF" IS 'CPF do visitante: Utilizado para busca rápida em retornos futuros.';

COMMENT ON COLUMN "CSTB004_VISITANTE"."NR_RG" IS 'Documento obrigatório para verificação física na portaria.';

COMMENT ON COLUMN "CSTB004_VISITANTE"."NR_TELEFONE" IS 'Telefone para contato em caso de emergência durante a visita.';

COMMENT ON COLUMN "CSTB004_VISITANTE"."LG_ATIVO" IS 'Define se o cadastro do visitante é válido ou se há restrições.';

COMMENT ON TABLE "CSTB015_ACESSO_VISITANTE" IS 'Tabela de movimentação: Registra cada entrada/saída de forma histórica.';

COMMENT ON COLUMN "CSTB015_ACESSO_VISITANTE"."ID_ACESSO" IS 'Chave primária: Identificador único de cada evento de entrada.';

COMMENT ON COLUMN "CSTB015_ACESSO_VISITANTE"."ID_VISITANTE" IS 'Chave Estrangeira: Referencia quem é o visitante entrando.';

COMMENT ON COLUMN "CSTB015_ACESSO_VISITANTE"."ID_MORADOR" IS 'Chave Estrangeira: Referencia quem autorizou a entrada deste visitante.';

COMMENT ON COLUMN "CSTB015_ACESSO_VISITANTE"."ID_FUNCIONARIO" IS 'Chave Estrangeira: Identifica o funcionário que registrou a entrada.';

COMMENT ON COLUMN "CSTB015_ACESSO_VISITANTE"."DT_ENTRADA" IS 'Data e hora exata da entrada no condomínio.';

COMMENT ON COLUMN "CSTB015_ACESSO_VISITANTE"."DT_SAIDA" IS 'Data e hora da saída definitiva do visitante.';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."ID_ENCOMENDA" IS 'Chave primária: Identificador único do pacote recebido.';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."ID_MORADOR" IS 'Chave Estrangeira: Morador destinatário que deve retirar o objeto.';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."ID_FUNCIONARIO" IS 'Chave Estrangeira: Identifica quem recebeu a encomenda na portaria.';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."NO_REMETENTE" IS 'Nome da empresa ou pessoa que enviou (Ex: Amazon, Mercado Livre).';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."ID_CATEGORIA_ENCOMENDA" IS 'Chave Estrangeira: Status atual (Pendente, Entregue, etc).';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."DT_RECEBIDO" IS 'Momento em que o volume deu entrada na guarita.';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."DT_RETIRADO" IS 'Momento da coleta pelo morador ou baixa administrativa.';

COMMENT ON COLUMN "CSTB005_ENCOMENDA"."LG_ATIVO" IS 'Controle de exclusão do registro de encomenda.';

COMMENT ON COLUMN "CSTB006_RECLAMACAO"."ID_RECLAMACAO" IS 'Chave primária: Identificador único da ocorrência.';

COMMENT ON COLUMN "CSTB006_RECLAMACAO"."ID_MORADOR" IS 'Chave Estrangeira: Identifica o morador que abriu o chamado.';

COMMENT ON COLUMN "CSTB006_RECLAMACAO"."TX_TITULO" IS 'Assunto resumido da reclamação ou sugestão.';

COMMENT ON COLUMN "CSTB006_RECLAMACAO"."DS_RECLAMACAO" IS 'Relato completo e detalhado do morador sobre o fato.';

COMMENT ON COLUMN "CSTB006_RECLAMACAO"."ID_CATEGORIA_RECLAMACAO" IS 'Chave Estrangeira: Status de resolução do chamado.';

COMMENT ON COLUMN "CSTB006_RECLAMACAO"."LG_ATIVO" IS 'Define se a reclamação ainda é visível no painel administrativo.';

COMMENT ON COLUMN "CSTB007_AVISO"."ID_AVISO" IS 'Chave primária: Identificador único do aviso no mural.';

COMMENT ON COLUMN "CSTB007_AVISO"."ID_USER" IS 'Chave Estrangeira: Identifica o administrador/síndico que publicou o aviso.';

COMMENT ON COLUMN "CSTB007_AVISO"."TX_TITULO" IS 'Título de destaque do comunicado.';

COMMENT ON COLUMN "CSTB007_AVISO"."DS_AVISO" IS 'Conteúdo informativo completo a ser exibido para os moradores.';

COMMENT ON COLUMN "CSTB007_AVISO"."DT_EXPIRACAO" IS 'Data limite para exibição automática do aviso no mural.';

COMMENT ON COLUMN "CSTB007_AVISO"."LG_ATIVO" IS 'Controle de publicação do aviso.';

COMMENT ON COLUMN "CSTB008_LOCAL"."ID_LOCAL" IS 'Chave primária: Identificador único da área de lazer/comum.';

COMMENT ON COLUMN "CSTB008_LOCAL"."NO_LOCAL" IS 'Nome da área (Ex: Salão de Festas, Churrasqueira 01).';

COMMENT ON COLUMN "CSTB008_LOCAL"."NR_CAPACIDADE" IS 'Número máximo de pessoas permitidas simultaneamente no local.';

COMMENT ON COLUMN "CSTB008_LOCAL"."LG_ATIVO" IS 'Define se o local está disponível para uso ou em manutenção.';

COMMENT ON COLUMN "CSTB009_RESERVA"."ID_RESERVA" IS 'Chave primária: Identificador único da reserva de espaço.';

COMMENT ON COLUMN "CSTB009_RESERVA"."ID_MORADOR" IS 'Chave Estrangeira: Referencia o morador responsável pelo uso.';

COMMENT ON COLUMN "CSTB009_RESERVA"."ID_LOCAL" IS 'Chave Estrangeira: Define qual área está sendo reservada.';

COMMENT ON COLUMN "CSTB009_RESERVA"."DT_INICIO" IS 'Início do período de reserva (Data e Hora).';

COMMENT ON COLUMN "CSTB009_RESERVA"."DT_FIM" IS 'Término do período de reserva (Data e Hora).';

COMMENT ON COLUMN "CSTB009_RESERVA"."ID_CATEGORIA_RESERVA" IS 'Chave Estrangeira: Status da reserva (Confirmada, Cancelada).';

COMMENT ON COLUMN "CSTB009_RESERVA"."LG_ATIVO" IS 'Indica se a reserva é válida e conta no calendário de ocupação.';

COMMENT ON COLUMN "CSTBH001_USER"."ID_HISTORICO" IS 'Chave primária artificial e sequencial da tabela de histórico.';

COMMENT ON COLUMN "CSTBH001_USER"."ID_USER" IS 'Identificador artificial único do usuário.';

COMMENT ON COLUMN "CSTBH001_USER"."NR_CPF" IS 'Número do Cadastro de Pessoas Físicas, utilizado como login.';

COMMENT ON COLUMN "CSTBH001_USER"."NO_PESSOA" IS 'Nome completo do usuário.';

COMMENT ON COLUMN "CSTBH001_USER"."NR_RG" IS 'Número do Registro Geral de Identidade do usuário.';

COMMENT ON COLUMN "CSTBH001_USER"."EM_PESSOAL" IS 'Endereço de correio eletrônico do usuário.';

COMMENT ON COLUMN "CSTBH001_USER"."NR_CELULAR" IS 'Número de telefone de contato com 11 dígitos (DDD + Número).';

COMMENT ON COLUMN "CSTBH001_USER"."ID_CATEGORIA_ACESSO" IS 'Define o nível de acesso. Valores permitidos: ADMIN, SINDICO, MORADOR, FUNCIONARIO.';

COMMENT ON COLUMN "CSTBH001_USER"."TX_SENHA" IS 'Senha de acesso criptografada do usuário.';

COMMENT ON COLUMN "CSTBH001_USER"."IC_ATIVO" IS 'Indicador de exclusão lógica. S para ativo, N para inativo.';

COMMENT ON COLUMN "CSTBH001_USER"."DH_ACAO_REGISTRO" IS 'Data e hora em que a ação foi realizada.';

COMMENT ON COLUMN "CSTBH001_USER"."IC_ACAO_REGISTRO" IS 'Indicador da ação realizada no registro: I (Inclusão), A (Alteração), E (Exclusão Lógica).';

COMMENT ON COLUMN "CSTBH001_USER"."ID_USER_USUARIO_ACAO_REGISTRO" IS 'Identificador do registro na tabela original que realizou a ação.';

COMMENT ON TABLE "CSTBH002_MORADOR" IS 'Histórico de mudanças de unidade ou status de moradores.';

COMMENT ON COLUMN "CSTBH002_MORADOR"."ID_HISTORICO" IS 'PK da auditoria.';

COMMENT ON COLUMN "CSTBH002_MORADOR"."ID_MORADOR" IS 'ID original do morador.';

COMMENT ON COLUMN "CSTBH002_MORADOR"."ID_USER" IS 'ID do usuário vinculado.';

COMMENT ON COLUMN "CSTBH002_MORADOR"."DH_ACAO_REGISTRO" IS 'Data/Hora da alteração.';

COMMENT ON COLUMN "CSTBH002_MORADOR"."IC_ACAO_REGISTRO" IS 'I=Inclusão, A=Alteração, E=Exclusão.';

COMMENT ON COLUMN "CSTBH002_MORADOR"."ID_USER_AUDITOR" IS 'Usuário que realizou a manobra no sistema.';

COMMENT ON TABLE "CSTBH003_FUNCIONARIO" IS 'Auditoria de cargos e permissões de funcionários.';

COMMENT ON TABLE "CSTBH005_ENCOMENDA" IS 'Crítico para auditoria em caso de extravio ou contestação de entrega.';

COMMENT ON TABLE "CSTBH009_RESERVA" IS 'Rastreia cancelamentos ou alterações de última hora em áreas comuns.';

ALTER TABLE "CSTB001_USER" ADD FOREIGN KEY ("ID_CATEGORIA_ACESSO") REFERENCES "CSTB010_CATEGORIA_ACESSO" ("ID_CATEGORIA_ACESSO");

ALTER TABLE "CSTB002_MORADOR" ADD FOREIGN KEY ("ID_USER") REFERENCES "CSTB001_USER" ("ID_USER") ON DELETE CASCADE;

ALTER TABLE "CSTB003_FUNCIONARIO" ADD FOREIGN KEY ("ID_USER") REFERENCES "CSTB001_USER" ("ID_USER") ON DELETE CASCADE;

ALTER TABLE "CSTB003_FUNCIONARIO" ADD FOREIGN KEY ("ID_CATEGORIA_CARGO") REFERENCES "CSTB011_CATEGORIA_CARGO" ("ID_CATEGORIA_CARGO");

ALTER TABLE "CSTB015_ACESSO_VISITANTE" ADD FOREIGN KEY ("ID_VISITANTE") REFERENCES "CSTB004_VISITANTE" ("ID_VISITANTE");

ALTER TABLE "CSTB015_ACESSO_VISITANTE" ADD FOREIGN KEY ("ID_MORADOR") REFERENCES "CSTB002_MORADOR" ("ID_MORADOR");

ALTER TABLE "CSTB015_ACESSO_VISITANTE" ADD FOREIGN KEY ("ID_FUNCIONARIO") REFERENCES "CSTB003_FUNCIONARIO" ("ID_FUNCIONARIO");

ALTER TABLE "CSTB005_ENCOMENDA" ADD FOREIGN KEY ("ID_MORADOR") REFERENCES "CSTB002_MORADOR" ("ID_MORADOR");

ALTER TABLE "CSTB005_ENCOMENDA" ADD FOREIGN KEY ("ID_CATEGORIA_ENCOMENDA") REFERENCES "CSTB012_CATEGORIA_ENCOMENDA" ("ID_CATEGORIA_ENCOMENDA");

ALTER TABLE "CSTB009_RESERVA" ADD FOREIGN KEY ("ID_LOCAL") REFERENCES "CSTB008_LOCAL" ("ID_LOCAL");

ALTER TABLE "CSTB009_RESERVA" ADD FOREIGN KEY ("ID_CATEGORIA_RESERVA") REFERENCES "CSTB014_CATEGORIA_RESERVA" ("ID_CATEGORIA_RESERVA");

ALTER TABLE "CSTBH001_USER" ADD FOREIGN KEY ("ID_USER_USUARIO_ACAO_REGISTRO") REFERENCES "CSTB001_USER" ("ID_USER") ON DELETE CASCADE;

ALTER TABLE "CSTBH002_MORADOR" ADD FOREIGN KEY ("ID_USER_AUDITOR") REFERENCES "CSTB001_USER" ("ID_USER");

ALTER TABLE "CSTBH003_FUNCIONARIO" ADD FOREIGN KEY ("ID_USER_AUDITOR") REFERENCES "CSTB001_USER" ("ID_USER");

ALTER TABLE "CSTBH005_ENCOMENDA" ADD FOREIGN KEY ("ID_USER_AUDITOR") REFERENCES "CSTB001_USER" ("ID_USER");

ALTER TABLE "CSTBH005_ENCOMENDA" ADD FOREIGN KEY ("ID_ENCOMENDA") REFERENCES "CSTB005_ENCOMENDA" ("ID_ENCOMENDA");

ALTER TABLE "CSTBH009_RESERVA" ADD FOREIGN KEY ("ID_USER_AUDITOR") REFERENCES "CSTB001_USER" ("ID_USER");

ALTER TABLE "CSTBH009_RESERVA" ADD FOREIGN KEY ("ID_RESERVA") REFERENCES "CSTB009_RESERVA" ("ID_RESERVA");
